<include file="Public/e_header"/>
<body style="background-image: url(/Public/static/img/data-bg.jpg)">
<form method="post" class="data">
    <div class="form-group">
        <label>学号:</label>
        <input type="text" name="student_id" value="{$user.student_id}"
               onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')">
    </div>
    <div class="form-group">
        <label>姓名:</label>
        <input type="text" name="student_name" value="{$user.student_name}">
    </div>
    <div class="form-group">
        <label>专业:</label>
        <input type="text" name="major" value="{$user.major}">
    </div>
    <div class="form-group">
        <label>电话:</label>
        <input type="text" name="phone" value="{$user.phone}" onkeyup="this.value=this.value.replace(/\D/g,'')"
               onafterpaste="this.value=this.value.replace(/\D/g,'')">
    </div>
    <div class="form-group">
        <label>邮箱:</label>
        <input type="text" name="email" value="{$user.email}">
    </div>
    <div class="form-group">
        <label>性别:</label>
        <select name="gender">
            <option value="男" {:IsSelected ($user[
            'gender'],"男")}>男</option>
            <option value="女" {:IsSelected($user[
            'gender'],"女")}>女</option>
        </select>
    </div>
    <div class="form-group">
        <label>学院:</label>
        <select name="school">
            <option value="微固体与电子学院" {:IsSelected($user[
            'school'],"微固体与电子学院")}>微固体与电子学院</option>
        </select>
    </div>
    <div class="form-group">
        <label>学历:{:IsSelected($user.student_status,"研究生")}</label>
        <select name="student_status">
            <option value="本科" {:IsSelected($user[
            'student_status'],"本科")}>本科</option>
            <option value="研究生" {:IsSelected($user[
            'student_status'],"研究生")}>研究生</option>
        </select>
    </div>
    <div class="form-group">
        <label>特长:</label>
        <textarea name="good">{$user.good}</textarea>
    </div>
    <p class="clearfix ins">请填写您真实有效的信息，<br>以便于在您在微沙龙和微学术中找到志同道合的人。</p>
    <button type="submit" class="button" onclick="return checkForm();">立即提交</button>
</form>

<script type="text/javascript">
    function checkForm() {
        if ($("form.data").find("input").val() == "" || $("form.data").find("textarea").val() == "") {
            alert("请填写完整的信息！");
            return false;
        }

        var id = $("input[name='student_id']").val();
        if (id.length != 13) {
            alert("请填写正确的学号！");
            return false;
        }

        var phone = $("input[name='phone']").val();
        if (phone.length != 11 && phone.length != 8) {
            alert("请填写正确的电话号！");
            return false;
        }

        var email = $("input[name='email']").val();
        if (email.indexOf("@") <= 0 || email.indexOf(".") <= 0 ||
                email.indexOf("@") > email.indexOf(".") ||
                email.length == email.indexOf(".") +1 ||
                email.indexOf(".") - email.indexOf("@") == 1) {
            alert("请填写正确的邮箱！");
            return false;
        }
    }
</script>
<include file="Public/e_footer"/>
